(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{201:function(e,t,a){e.exports=a(488)},206:function(e,t,a){},207:function(e,t,a){},380:function(e,t){},382:function(e,t){},420:function(e,t){},421:function(e,t){},488:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),l=a(26),i=a.n(l),s=(a(206),a(35)),c=a(36),r=a(38),u=a(37),m=a(39),h=(a(207),a(54)),d=a(43),p=a(77),b=a(53),g=a(22),E=a.n(g),v=a(40),f=a.n(v),w=a(78),y=a.n(w),k=a(79),S=a.n(k),C=a(81),j=a.n(C),O=a(80),D=a.n(O),N=a(32),T=a.n(N),x=a(42),_=a.n(x),A=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(r.a)(this,Object(u.a)(t).call(this,e))).state={email:"",password:"",message:""},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(p.a)({},e.target.name,e.target.value))}},{key:"handleFormSubmit",value:function(e){var t=this;e.preventDefault(),this.source=E.a.CancelToken.source();var a={email:this.state.email,password:this.state.password};E.a.post("http://ec2-13-53-32-89.eu-north-1.compute.amazonaws.com:3000/register",a,{cancelToken:this.source.token}).then(function(e){console.log(e),201===e.status&&(t.props.history.push("/register"),t.setState({message:"You have been registered successfully. Please login now",email:"",password:""}))}).catch(function(e){E.a.isCancel(e)||t.setState({message:"Something went wrong !!!!"})})}},{key:"componentWillUnmount",value:function(){this.source&&this.source.cancel()}},{key:"render",value:function(){return o.a.createElement("div",{style:{textAlign:"center"}},o.a.createElement(b.Helmet,null,o.a.createElement("title",null,"Register")),o.a.createElement("br",null),o.a.createElement("div",{className:"login__form"},o.a.createElement("form",{onSubmit:this.handleFormSubmit.bind(this),noValidate:!0,autoComplete:"off"},o.a.createElement(y.a,{style:{width:"300px"}},o.a.createElement("i",{className:"material-icons accountman",style:{fontSize:"100px"}},"account_circle"),o.a.createElement(S.a,{title:"SIGN-UP"}),o.a.createElement(D.a,null,o.a.createElement("div",{className:"message"},this.state.message)," ",o.a.createElement(_.a,{component:"p"},o.a.createElement(f.a,{id:"outlined-email-input",label:"Email",style:{width:250},type:"email",name:"email",value:this.state.email,onChange:this.handleChange.bind(this)})," ",o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(f.a,{style:{width:250,margin:0},id:"outlined-email-input",label:"Password",type:"password",name:"password",value:this.state.password,onChange:this.handleChange.bind(this)})," ",o.a.createElement("br",null),o.a.createElement("br",null))),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(j.a,{className:"login__button"},o.a.createElement(T.a,{style:{width:"100%"},type:"submit",variant:"contained",color:"primary"},"REGISTER")),o.a.createElement("p",null,"Already have an account? ",o.a.createElement(T.a,{variant:"outlined",color:"primary"},o.a.createElement(h.b,{to:"/"},"Login")))))))}}]),t}(n.Component),I=new(a(490).a)(window.localStorage.getItem("token")||null);function z(e){e?window.localStorage.setItem("token",e):window.localStorage.removeItem("token"),I.next(e)}var B=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(r.a)(this,Object(u.a)(t).call(this,e))).state={email:"",password:"",message:""},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(p.a)({},e.target.name,e.target.value))}},{key:"handleFormSubmit",value:function(e){var t=this;e.preventDefault(),this.source=E.a.CancelToken.source();var a={email:this.state.email,password:this.state.password};E.a.post("http://ec2-13-53-32-89.eu-north-1.compute.amazonaws.com:3000/auth",a,{cancelToken:this.source.token}).then(function(e){console.log(e),200===e.status&&(z(e.data.token),window.localStorage.setItem("token",e.data.token),t.props.history.push("/todos"))}).catch(function(e){E.a.isCancel(e)||t.setState({message:"Something went wrong !!!!"})})}},{key:"componentWillUnmount",value:function(){this.source&&this.source.cancel()}},{key:"render",value:function(){return o.a.createElement("div",{style:{textAlign:"center"}},o.a.createElement(b.Helmet,null,o.a.createElement("title",null,"Login")),o.a.createElement("br",null),o.a.createElement("div",{className:"login__form"},o.a.createElement("form",{onSubmit:this.handleFormSubmit.bind(this),noValidate:!0,autoComplete:"off"},o.a.createElement(y.a,{style:{width:"300px"}},o.a.createElement("i",{className:"material-icons accountman",style:{fontSize:"100px"}},"account_circle"),o.a.createElement(S.a,{title:"SIGN-IN"}),o.a.createElement(D.a,null,o.a.createElement("div",{className:"message"},this.state.message)," ",o.a.createElement(_.a,{component:"p"},o.a.createElement(f.a,{id:"outlined-email-input",label:"Email",style:{width:250},type:"email",name:"email",value:this.state.email,onChange:this.handleChange.bind(this)})," ",o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(f.a,{style:{width:250,margin:0},id:"outlined-email-input",label:"Password",type:"password",name:"password",value:this.state.password,onChange:this.handleChange.bind(this)}),o.a.createElement("br",null),o.a.createElement("br",null))),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(j.a,{className:"login__button"},o.a.createElement(T.a,{style:{width:"100%"},type:"submit",variant:"contained",color:"primary"},"LOGIN")),o.a.createElement("p",null,"Don't have an Account? ",o.a.createElement(T.a,{variant:"outlined",color:"primary"},o.a.createElement(h.b,{to:"/register"},"Register")))))))}}]),t}(n.Component),F=a(196),L=a.n(F),M=a(197),W=a.n(M),P=a(198),R=a.n(P),U=a(199),G=a.n(U),H=a(200),J=a.n(H),V="http://ec2-13-53-32-89.eu-north-1.compute.amazonaws.com:3000",Y=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(r.a)(this,Object(u.a)(t).call(this,e))).state={token:I.value,email:"",message:"",newtodo:"",todolist:[]},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(this.subscription=I.subscribe(function(t){e.setState({token:t})}),this.source=E.a.CancelToken.source(),this.state.token){var t=L.a.decode(I.value);console.log("Decoded email: ",t.email),this.setState({email:t.email})}else this.props.history.push("/");E.a.get(V+"/todos",{cancelToken:this.source.token,headers:{Authorization:"Bearer "+I.value}}).then(function(t){console.log("Response is: ",t),e.setState({todolist:t.data.todos.reverse()})}).catch(function(t){console.log(t),e.setState({message:"Something went wrong !!!!"})})}},{key:"componentWillUnmount",value:function(){this.source.cancel(),this.subscription.unsubscribe(),z(null)}},{key:"handleLogout",value:function(e){e.preventDefault(),z(null),this.props.history.push("/")}},{key:"handleChange",value:function(e){e.preventDefault(),this.setState({newtodo:e.target.value})}},{key:"handleFormSubmit",value:function(e){var t=this;e.preventDefault(),this.subscription=I.subscribe(function(e){t.setState({token:e})}),this.source=E.a.CancelToken.source(),E.a.post(V+"/todos",{content:this.state.newtodo},{headers:{cancelToken:this.source.token,Authorization:"Bearer "+I.value}}).then(function(e){console.log(e),t.componentDidMount(),t.setState({message:"Created new todo successfully",newtodo:""})}).catch(function(e){t.setState({message:"Please fill in the field !!!!"})})}},{key:"handleDeleteTodo",value:function(e){var t=this;E.a.delete(V+"/todos/"+e,{headers:{cancelToken:this.source.token,Authorization:"Bearer "+I.value}}).then(function(e){t.setState({message:"Deleted todo successfully"}),t.componentDidMount()}).catch(function(e){console.log(e),t.setState({message:"Something went wrong !!!!"}),t.componentDidMount()})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(b.Helmet,null,o.a.createElement("title",null,"Todos")),o.a.createElement(W.a,null,o.a.createElement(R.a,null,o.a.createElement(G.a,{color:"inherit","aria-label":"Menu"},o.a.createElement("i",{className:"material-icons accountman"},"account_circle ")," ",this.state.email),o.a.createElement(_.a,{variant:"h6",color:"inherit",style:{width:"100%",textAlign:"right"}},o.a.createElement(T.a,{color:"inherit",onClick:this.handleLogout.bind(this)},"Logout"))))," ",o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("div",{className:"form"},o.a.createElement("div",{marginBottom:"5px"},o.a.createElement("form",{onSubmit:this.handleFormSubmit.bind(this)},o.a.createElement(f.a,{style:{width:"100%"},id:"outlined-Add-Todo-input",label:"Add Todos",type:"text",variant:"outlined",value:this.state.newtodo,onChange:this.handleChange.bind(this)})),o.a.createElement("div",{className:"message"},this.state.message)," "),o.a.createElement("div",{className:"todo__form"},this.state.todolist.map(function(t){return o.a.createElement(o.a.Fragment,null,o.a.createElement("ul",{key:t.id},o.a.createElement(J.a,{style:{textAlign:"right",justifyContent:"space-between",marginBottom:"0"},label:t.content,onDelete:function(){e.handleDeleteTodo(t.id)},color:"secondary"})))}))))}}]),t}(n.Component),$=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(r.a)(this,Object(u.a)(t).call(this,e))).state={token:null},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.subscription=I.subscribe(function(t){e.setState({token:t})})}},{key:"componentWillUnmount",value:function(){this.subscription.unsubscribe()}},{key:"render",value:function(){return o.a.createElement(h.a,null,o.a.createElement(d.a,{exact:!0,path:"/",component:B}),o.a.createElement(d.a,{path:"/register",component:A}),o.a.createElement(d.a,{path:"/todos",component:Y}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement($,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[201,1,2]]]);
//# sourceMappingURL=main.ecc026de.chunk.js.map